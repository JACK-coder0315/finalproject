<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HbA1c &amp; Early Diabetes Risk Visualization</title>

  <!-- ====== 引入 D3.js ====== -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

  <!-- ====== 自定义样式 ====== -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- ==============================
       顶部导航栏（固定）
       ============================== -->
  <nav id="navbar">
    <ul>
      <li><a href="#intro">Introduction</a></li>
      <li><a href="#dist">HbA1c Distribution</a></li>
      <li><a href="#trend">Age/Time Trends</a></li>
      <li><a href="#risk">Risk Curve</a></li>
      <li><a href="#case">Individual Cases</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
    </ul>
  </nav>

  <!-- ==============================
       1. 引言部分
       ============================== -->
  <section id="intro" class="section-container">
    <h1>What is HbA1c and Why Does It Matter?</h1>
    <p>
      HbA1c (glycated hemoglobin) is formed when glucose binds to hemoglobin in red blood cells. Since red blood cells
      live about 120 days,
      HbA1c reflects the average blood glucose level over the past 2–3 months. Clinically, HbA1c is used both for
      diagnosing diabetes and for monitoring long-term glucose control.
      <br /><br />
      <strong>Normal range:</strong> HbA1c &lt; 5.7%<br />
      <strong>Prediabetes (high risk):</strong> 5.7% ≤ HbA1c &lt; 6.5%<br />
      <strong>Diabetes diagnosis:</strong> HbA1c ≥ 6.5%
    </p>
    <p>
      In this interactive visualization, we will explore:
    <ol>
      <li>Population-level distribution of HbA1c</li>
      <li>How average HbA1c changes with age</li>
      <li>The relationship between HbA1c and probability of developing type 2 diabetes</li>
      <li>Example individual trajectories from normal to prediabetes to diabetes</li>
    </ol>
    </p>
  </section>

  <!-- ==============================
       2. 人群 HbA1c 分布（直方图）
       ============================== -->
  <section id="dist" class="section-container">
    <h2>Population-Level HbA1c Distribution</h2>
    <!-- 下面这个 div 要与 main.js 中 drawHistogram() 里 d3.select('#histogram') 相对应 -->
    <div id="histogram"></div>
    <p class="caption">Figure 1. Distribution of HbA1c values in a representative cohort.</p>
  </section>

  <!-- ==============================
       3. HbA1c 随年龄变化的趋势（折线 + 滑块）
       ============================== -->
  <section id="trend" class="section-container">
    <h2>HbA1c Trends Over Age</h2>
    <!-- 下面 slider 的 ID 要与 main.js 中 drawAgeTrend() 对应 -->
    <div id="age-slider-container">
      <label for="ageSlider">Select Age: </label>
      <!-- 不需要在这里写 min/max/value，main.js 会动态设置 -->
      <input type="range" id="ageSlider" />
      <span id="ageValue"></span>
    </div>
    <!-- 下面这个 div 要与 main.js 中 drawAgeTrend() 里 d3.select('#lineChart') 相对应 -->
    <div id="lineChart"></div>
    <p class="caption">Figure 2. Change in mean HbA1c by age group (drag slider to update).</p>
  </section>

  <!-- ==============================
       4. HbA1c 与糖尿病风险曲线（散点 + 连线）
       ============================== -->
  <section id="risk" class="section-container">
    <h2>HbA1c vs. Diabetes Risk</h2>
    <!-- 这个 div 要与 main.js 中 drawRiskCurve() 里 d3.select('#riskCurve') 相对应 -->
    <div id="riskCurve"></div>
    <p class="caption">Figure 3. Estimated probability of developing type 2 diabetes as HbA1c increases.</p>
  </section>

  <!-- ==============================
       5. 个体案例模拟（如果有纵向数据，可放到这里；否则留空或删掉）
       ============================== -->
  <section id="case" class="section-container">
    <h2>Individual Progression Examples</h2>
    <!-- 如果你在后面准备了 case_examples.csv 并实现了 drawCaseExamples()，要把这个 div 留着 -->
    <div id="caseCharts"></div>
    <p class="caption">Figure 4. Example trajectories from normal → prediabetes → diabetes.</p>
  </section>

  <!-- ==============================
       6. 结论与参考文献
       ============================== -->
  <section id="conclusion" class="section-container">
    <h2>Conclusions &amp; References</h2>
    <ul>
      <li>When HbA1c ≥ 5.7%, it falls into the “prediabetes” range, and the risk of developing diabetes rises
        significantly; lifestyle interventions should be initiated immediately.</li>
      <li>Across different age groups, the average HbA1c increases with age, with a particularly faster rise after
        middle age.</li>
      <li>Based on a logistic regression model, each 1% increase in HbA1c substantially raises the likelihood of
        developing diabetes; clinically, it is recommended to keep HbA1c &lt; 6.5%.</li>
      <li>Individual trajectory examples demonstrate that early detection and intervention can reverse or delay
        progression from the “prediabetes” stage for some people.</li>
    </ul>
    <h3>References</h3>
    <ol>
      <li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4933534/" target="_blank">Significance of HbA1c Test in
          Diagnosis and Prognosis of Diabetic Complications</a></li>
      <li><a href="https://www.ncbi.nlm.nih.gov/books/NBK304271/" target="_blank">Glycated Haemoglobin (HbA1c) for the
          Diagnosis of Diabetes</a></li>
      <li><a href="https://academic.oup.com/pmj/article/97/1148/380/6969559" target="_blank">Is HbA1c an Ideal Biomarker
          of Well-Controlled Diabetes?</a></li>
      <li><a href="https://onlinelibrary.wiley.com/doi/10.1111/j.1753-0407.2009.00009.x" target="_blank">Review of
          Hemoglobin A1c in the Management of Diabetes</a></li>
      <li><a href="https://www.nature.com/articles/s41591-023-02610-2" target="_blank">Global Variation in Diabetes
          Diagnosis and Prevalence Based on Fasting Glucose and Hemoglobin A1c</a></li>
    </ol>
  </section>

  <!-- ==============================
       引入自定义脚本（必须放在 body 底部）
       ============================== -->
  <!-- main.js 中包含了 drawHistogram、drawAgeTrend、drawRiskCurve 等函数 -->
  <script src="main.js"></script>
</body>

</html>