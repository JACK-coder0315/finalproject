<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HbA1c &amp; Early Diabetes Risk Visualization</title>

  <!-- ====== Include D3.js ====== -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

  <!-- ====== Custom Styles ====== -->
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
</head>

<body>
  <!-- ==============================
       Top Navigation Bar (Fixed)
       ============================== -->
  <nav id="navbar">
    <ul>
      <li><a href="#hero">Home</a></li>
      <li><a href="#intro">Introduction</a></li>
      <li><a href="#dist">HbA1c Distribution</a></li>
      <li><a href="#ageViolin">Age &amp; Gender Plots</a></li>
      <li><a href="#risk">Risk Curve</a></li>
      <li><a href="#case">BMI vs. HbA1c</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
    </ul>
  </nav>

  <!-- ==============================
       0. Hero Section: Two Columns
       ============================== -->
  <section id="hero" class="hero-section">
    <!-- Left: Text Area -->
    <div class="hero-text">
      <h1 class="hero-title">
        The Effect of <span class="highlight">HbA1c</span> on Predicting Diabetes
      </h1>
      <p class="hero-subtitle">
        Investigating how HbA1c levels vary across different age groups and genders, and their implications for
        early diabetes risk.
      </p>
      <div class="hero-buttons">
        <a href="https://www.kaggle.com/datasets/iammustafatz/diabetes-prediction-dataset" class="btn btn-primary"
          target="_blank" rel="noopener noreferrer">
          Data
        </a>
        <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC4933534/" class="btn btn-secondary" target="_blank"
          rel="noopener noreferrer">
          Explore More
        </a>
      </div>
    </div>

    <!-- Right: Graphic/Carousel -->
    <div class="hero-graphic">
      <div class="graphic-container">
        <div class="carousel">
          <div class="slide active">
            <img src="images/slide1.png" alt="3D Render of Red Blood Cells" />
          </div>
          <div class="slide">
            <img src="images/slide2.png" alt="High vs Low HbA1c on Red Blood Cell" />
          </div>
          <div class="slide">
            <img src="images/slide3.png" alt="Normal vs High Blood Glucose Illustration" />
          </div>
          <div class="slide">
            <img src="images/slide4.png" alt="Blood Glucose Meter Illustration" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==============================
       1. Introduction Section
       ============================== -->
  <section id="intro" class="section-container">
    <h1>What is HbA1c and Why Does It Matter?</h1>
    <p>
      HbA1c (glycated hemoglobin) is a biomarker formed when glucose binds to hemoglobin in red blood cells. Because
      red blood cells live for about 120 days, HbA1c provides a reliable measure of average blood glucose levels over
      the preceding 2–3 months. Clinically, HbA1c is widely used for diagnosing diabetes, identifying prediabetes,
      and monitoring long-term glycemic control.
      <br /><br />
      <strong>Normal range:</strong> HbA1c &lt; 5.7%<br />
      <strong>Prediabetes (high risk):</strong> 5.7% ≤ HbA1c &lt; 6.5%<br />
      <strong>Diabetes diagnosis:</strong> HbA1c ≥ 6.5%
    </p>
    <p>
      In this interactive visualization, we will explore:
    <ol>
      <li>Population-level distribution of HbA1c</li>
      <li>How HbA1c varies across defined age groups</li>
      <li>Comparison of HbA1c by gender (male vs. female)</li>
      <li>The relationship between HbA1c and the probability of developing type 2 diabetes</li>
      <li>Example individual trajectories illustrating progression from normal to prediabetes to diabetes</li>
    </ol>
    </p>
  </section>

  <!-- ==============================
       2. Population-Level HbA1c Distribution
       ============================== -->
  <section id="dist" class="section-container">
    <div class="two-column">
      <!-- Left: Key Statistics -->
      <div class="summary-text">
        <h2>Key Statistics</h2>
        <p>
          <strong>Dataset Summary:</strong><br />
          This dataset contains <strong>10,000 participants</strong> with HbA1c measurements and demographic attributes (age, gender, etc.). We categorized each subject into one of three HbA1c status groups based on standard clinical thresholds.
        </p>
        <div class="stats-grid">
          <div class="stat-item">
            <h3>10,000</h3>
            <p>Total Subjects</p>
          </div>
          <div class="stat-item">
            <h3>7,200</h3>
            <p>Normal<br />(HbA1c &lt; 5.7%)</p>
          </div>
          <div class="stat-item">
            <h3>2,100</h3>
            <p>Prediabetes<br />(5.7 ≤ HbA1c &lt; 6.5)</p>
          </div>
          <div class="stat-item">
            <h3>700</h3>
            <p>Diabetes<br />(HbA1c ≥ 6.5)</p>
          </div>
        </div>
      </div>

      <!-- Right: Histogram -->
      <div class="chart-container">
        <h2>Population‐Level HbA1c Distribution</h2>
        <div id="histogram"></div>
        <p class="caption">
          Figure 1. Distribution of HbA1c values across the entire cohort.
        </p>
      </div>
    </div>
  </section>

  <!-- ==============================
       3. Age & Gender Analysis (Violin + Box Plots)
       ============================== -->
  <section id="ageViolin" class="section-container">
    <div class="two-column">
      <!-- Left: Explanation -->
      <div class="summary-text">
        <h2>Age &amp; Gender Analysis</h2>
        <p>
          To understand how HbA1c distribution varies across different segments of the population, we performed two analyses:
        </p>
        <ul>
          <li>
            <strong>Age Group Violin Plot:</strong> The cohort was divided into four age brackets: <strong>0–20, 20–40, 40–60, 60–80</strong>. For each bracket, we generated a violin plot to visualize the full density distribution of HbA1c values within that age range, highlighting shape, spread, and potential multimodal patterns.
          </li>
          <li>
            <strong>Gender Box Plot:</strong> Participants were segregated by gender (Male vs. Female). We constructed box plots illustrating the median, interquartile range (IQR), and whiskers based on standard 1.5×IQR rules, revealing skewness, outliers, and spread differences between genders.
          </li>
        </ul>
      </div>

      <!-- Right: Violin + Box Plots -->
      <div class="chart-container">
        <h2>HbA1c by Age Group &amp; Gender</h2>
        <div id="violinPlot"></div>
        <p class="caption">Figure 2a. Violin Plot: HbA1c Distribution by Age Group</p>

        <div id="genderBoxPlot" style="margin-top: 2rem;"></div>
        <p class="caption">Figure 2b. Box Plot: HbA1c Distribution by Gender</p>
      </div>
    </div>
  </section>

  <!-- ==============================
       4. Risk Curve (Slider + Line Chart)
       ============================== -->
  <section id="risk" class="section-container">
    <div class="two-column">
      <!-- Left: Slider + Line Chart -->
      <div class="chart-container">
        <h2>HbA1c Threshold vs. Diabetes Proportion</h2>
        <div id="thresholdSliderContainer" style="margin-bottom: 1.5rem;">
          <label for="hbSlider">HbA1c Threshold: </label>
          <input type="range" id="hbSlider" step="0.1" />
          <span id="thresholdValue">0.0</span>
        </div>
        <div id="riskBar"></div>
        <p class="caption">Figure 3. When HbA1c ≥ threshold T, the proportion of diabetes cases in that subgroup.</p>
      </div>

      <!-- Right: Explanation -->
      <div class="summary-text">
        <h2>Interpretation</h2>
        <p>
          This chart uses a slider to control a threshold T. As the user drags the slider, the chart calculates and displays the proportion of individuals with HbA1c ≥ T who have diabetes. A marker moves along the line in real time, and the percentage value is shown above it.
        </p>
        <ul>
          <li>When T is low (close to the minimum HbA1c), many individuals meet the criterion, but the proportion diagnosed with diabetes is relatively small.</li>
          <li>As T increases, only those with higher HbA1c remain, and their diabetes proportion gradually rises.</li>
          <li>Once T exceeds around 6.5% (clinical diagnostic threshold), the curve approaches 100%, indicating nearly all individuals in this subgroup are diagnosed with diabetes.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ==============================
       5. BMI vs. HbA1c Scatter Plot (Multi-Factor Coloring)
       ============================== -->
  <section id="case" class="section-container">
    <h2>Interactive BMI vs. HbA1c Scatter Plot</h2>
    <p class="subtitle" style="margin-bottom: 1rem;">
      X-axis = BMI, Y-axis = HbA1c (%). Each point’s color encodes the combination of four binary factors: Hypertension (HT), Heart Disease (HD), Smoking (SM), and High BMI (HB ≥ 25). Hover to see each factor’s “Yes/No” status and the point’s numerical values.
    </p>

    <div id="comboScatter"></div>
    <p class="caption">
      The legend on the right shows only the combinations that appear in the data, labeled like “HT:Y, HD:N, SM:Y, HB:N” (Yes/No for Hypertension/Heart Disease/Smoking/High BMI).
    </p>
  </section>

  <!-- ==============================
       6. Conclusions & References
       ============================== -->
  <section id="conclusion" class="section-container">
    <h2>Conclusions &amp; References</h2>
    <ul>
      <li>By visualizing multiple risk-factor combinations, we can compare how HbA1c levels vary across subgroups (e.g. those with Hypertension + Heart Disease + Smoking + High BMI tend to have higher HbA1c).</li>
      <li>The color encoding captures up to 2⁴ = 16 possible combinations (the legend displays only those that actually occur in the dataset).</li>
    </ul>
    <h3>References</h3>
    <ol>
      <li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4933534/" target="_blank">Significance of HbA1c Test in Diagnosis and Prognosis of Diabetic Complications</a></li>
      <li><a href="https://www.ncbi.nlm.nih.gov/books/NBK304271/" target="_blank">Glycated Haemoglobin (HbA1c) for the Diagnosis of Diabetes</a></li>
      <li><a href="https://academic.oup.com/pmj/article/97/1148/380/6969559" target="_blank">Is HbA1c an Ideal Biomarker of Well-Controlled Diabetes?</a></li>
    </ol>
  </section>

  <!-- ==============================
       Include Custom Script (at end of body)
       ============================== -->
  <script src="main.js"></script>
</body>

</html>
