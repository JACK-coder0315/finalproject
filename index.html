<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HbA1c &amp; Early Diabetes Risk Visualization</title>

  <!-- ====== 引入 D3.js ====== -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

  <!-- ====== 自定义样式 ====== -->
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
</head>

<body>
  <!-- ==============================
       顶部导航栏（固定）
       ============================== -->
  <nav id="navbar">
    <ul>
      <li><a href="#hero">Home</a></li>
      <li><a href="#intro">Introduction</a></li>
      <li><a href="#dist">HbA1c Distribution</a></li>
      <li><a href="#ageViolin">Age &amp; Gender Plots</a></li>
      <li><a href="#risk">Risk Curve</a></li>
      <li><a href="#case">Individual Cases</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
    </ul>
  </nav>

  <!-- ==============================
       0. Hero Section：左右两栏
       ============================== -->
  <section id="hero" class="hero-section">
    <!-- 左侧文字区域 -->
    <div class="hero-text">
      <h1 class="hero-title">
        The Effect of <span class="highlight">HbA1c</span> on Predicting Diabetes
      </h1>
      <p class="hero-subtitle">
        Investigating how HbA1c levels vary across different age groups and genders, and their implications for
        early diabetes risk.
      </p>
      <div class="hero-buttons">
        <!-- Data 按钮跳转到 Kaggle 数据集 -->
        <a href="https://www.kaggle.com/datasets/iammustafatz/diabetes-prediction-dataset" class="btn btn-primary"
          target="_blank" rel="noopener noreferrer">
          Data
        </a>
        <!-- Explore more 按钮跳转到 PMC 文章 -->
        <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC4933534/" class="btn btn-secondary" target="_blank"
          rel="noopener noreferrer">
          Explore more
        </a>
      </div>
    </div>

    <div class="hero-graphic">
      <div class="graphic-container">
        <!-- ====== 轮播 (Carousel) 开始 ====== -->
        <div class="carousel">
          <!-- 第一帧 -->
          <div class="slide active">
            <img src="images/slide1.png" alt="3D Render of Red Blood Cells" />
          </div>
          <!-- 第二帧 -->
          <div class="slide">
            <img src="images/slide2.png" alt="High vs Low HbA1c on Red Blood Cell" />
          </div>
          <!-- 第三帧 -->
          <div class="slide">
            <img src="images/slide3.png" alt="Normal vs High Blood Glucose Illustration" />
          </div>
          <!-- 第四帧 -->
          <div class="slide">
            <img src="images/slide4.png" alt="Blood Glucose Meter Illustration" />
          </div>
        </div>
        <!-- ====== 轮播 (Carousel) 结束 ====== -->
      </div>
    </div>
  </section>

  <!-- ==============================
       1. 引言部分
       ============================== -->
  <section id="intro" class="section-container">
    <h1>What is HbA1c and Why Does It Matter?</h1>
    <p>
      HbA1c (glycated hemoglobin) is a biomarker formed when glucose binds to hemoglobin in red blood cells. Because
      red blood cells live for about 120 days, HbA1c provides a reliable measure of average blood glucose levels over
      the preceding 2–3 months. Clinically, HbA1c is widely used for diagnosing diabetes, identifying prediabetes,
      and monitoring long-term glycemic control.
      <br /><br />
      <strong>Normal range:</strong> HbA1c &lt; 5.7%<br />
      <strong>Prediabetes (high risk):</strong> 5.7% ≤ HbA1c &lt; 6.5%<br />
      <strong>Diabetes diagnosis:</strong> HbA1c ≥ 6.5%
    </p>
    <p>
      In this interactive visualization, we will explore:
    <ol>
      <li>Population-level distribution of HbA1c</li>
      <li>How HbA1c varies across defined age groups</li>
      <li>Comparison of HbA1c by gender (male vs. female)</li>
      <li>The relationship between HbA1c and the probability of developing type 2 diabetes</li>
      <li>Example individual trajectories illustrating progression from normal to prediabetes to diabetes</li>
    </ol>
    </p>
  </section>

  <!-- ==============================
       2. 人群 HbA1c 分布 —— 左右两栏：Key Statistics & Visualization
       ============================== -->
  <section id="dist" class="section-container">
    <div class="two-column">
      <!-- 左侧：Key Statistics 区块 -->
      <div class="summary-text">
        <h2>Key Statistics</h2>
        <p>
          <strong>Dataset Summary:</strong><br />
          This dataset contains <strong>10,000 participants</strong> who have both HbA1c measurements and
          demographic attributes (age, gender, etc.). We categorized each subject into one of three HbA1c status
          groups based on standard clinical thresholds.
        </p>
        <div class="stats-grid">
          <div class="stat-item">
            <h3>10,000</h3>
            <p>Total Subjects</p>
          </div>
          <div class="stat-item">
            <h3>7,200</h3>
            <p>Normal<br />(HbA1c &lt; 5.7%)</p>
          </div>
          <div class="stat-item">
            <h3>2,100</h3>
            <p>Prediabetes<br />(5.7 ≤ HbA1c &lt; 6.5)</p>
          </div>
          <div class="stat-item">
            <h3>700</h3>
            <p>Diabetes<br />(HbA1c ≥ 6.5)</p>
          </div>
        </div>
      </div>

      <!-- 右侧：Population-Level HbA1c Distribution 可视化 -->
      <div class="chart-container">
        <h2>Population‐Level HbA1c Distribution</h2>
        <div id="histogram"></div>
        <p class="caption">
          Figure 1. Distribution of HbA1c values across the entire cohort.
        </p>
      </div>
    </div>
  </section>

  <!-- ==============================
       3. 年龄段 & 性别 分析 —— 左右两栏：小提琴图 & 箱线图
       ============================== -->
  <section id="ageViolin" class="section-container">
    <div class="two-column">
      <!-- 左侧：Age & Gender Analysis 说明 (全英文，详细版) -->
      <div class="summary-text">
        <h2>Age &amp; Gender Analysis</h2>
        <p>
          In order to better understand how HbA1c distribution varies across different segments of the population, we
          performed two focused analyses:
        </p>
        <ul>
          <li>
            <strong>Age Group Violin Plot:</strong> We divided the entire cohort into four distinct age brackets:
            <strong>0–20 years, 20–40 years, 40–60 years, and 60–80 years</strong>. For each bracket, we collected all
            HbA1c measurements and generated a violin plot that visualizes the full distribution density of HbA1c
            values within that age range. This allows us to see the shape, spread, and symmetry of the data, as well
            as any potential multimodal patterns.
          </li>
          <li>
            <strong>Gender Box Plot:</strong> We also segregated participants by gender—<strong>Male</strong> and
            <strong>Female</strong>—and constructed a box plot for each category, illustrating the median, interquartile
            range (IQR), and whiskers based on standard 1.5×IQR rules. This comparison reveals any skewness, outliers,
            and general spread differences in HbA1c between men and women.
          </li>
        </ul>
        <p>
          Based on the violin and box plots, HbA1c concentrations remain remarkably consistent across different age
          brackets (0–20, 20–40, 40–60, and 60–80 years), with all age groups exhibiting very similar median values and
          distribution shapes. Likewise, the box plot shows virtually identical median, interquartile range, and whisker
          spans for males and females. In other words, neither age nor gender appears to have a meaningful impact on
          overall HbA1c levels in this cohort.
          plans.
        </p>
      </div>

      <!-- 右侧：两个图并排，顶部小提琴图，底部箱线图 -->
      <div class="chart-container">
        <h2>HbA1c by Age Group &amp; Gender</h2>
        <!-- Violin Plot -->
        <div id="violinPlot"></div>
        <p class="caption">Figure 2a. Violin Plot: HbA1c Distribution by Age Group</p>

        <!-- Box Plot (height 与小提琴图相同) -->
        <div id="genderBoxPlot" style="margin-top: 2rem;"></div>
        <p class="caption">Figure 2b. Box Plot: HbA1c Distribution by Gender</p>
      </div>
    </div>
  </section>

  <!-- ==============================
       4. HbA1c Threshold vs. Diabetes Proportion —— 滑块 + 折线图 & 活动圆点
       ============================== -->
  <section id="risk" class="section-container">
    <h2>HbA1c Threshold vs. Diabetes Proportion</h2>

    <!-- 滑块容器 -->
    <div id="thresholdSliderContainer" style="margin-bottom: 1.5rem;">
      <label for="hbSlider">HbA1c Threshold: </label>
      <input type="range" id="hbSlider" step="0.1" />
      <span id="thresholdValue">0.0</span>
    </div>

    <!-- 动态折线图的 SVG 容器 -->
    <div id="riskBar"></div>

    <p class="caption">
      Figure 3. 当 HbA1c ≥ 阈值 T 时，该人群中糖尿病患者所占比例。滑块可以控制 T，折线图上会显示对应点并实时更新，直观说明 HbA1c 越高，患糖尿病的比例越大。
    </p>
  </section>

  <!-- ==============================
       5. 个体案例模拟（如果有纵向数据，可放到这里；否则留空或删掉）
       ============================== -->
  <section id="case" class="section-container">
    <h2>Individual Progression Examples</h2>
    <div id="caseCharts"></div>
    <p class="caption">Figure 4. Example trajectories from normal → prediabetes → diabetes.</p>
  </section>

  <!-- ==============================
       6. 结论与参考文献
       ============================== -->
  <section id="conclusion" class="section-container">
    <h2>Conclusions &amp; References</h2>
    <ul>
      <li>When HbA1c ≥ 5.7%, it falls into the “prediabetes” range, and the risk of developing diabetes rises
        significantly; lifestyle interventions should be initiated immediately.</li>
      <li>Across different age groups, the average HbA1c slightly increases with age, particularly after middle age.</li>
      <li>Based on a logistic regression model, each 1% increase in HbA1c substantially raises the likelihood of
        developing diabetes; clinically, it is recommended to keep HbA1c &lt; 6.5%.</li>
      <li>Individual trajectory examples demonstrate that early detection and intervention can reverse or delay
        progression from the “prediabetes” stage for some people.</li>
    </ul>
    <h3>References</h3>
    <ol>
      <li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4933534/" target="_blank">Significance of HbA1c Test in
          Diagnosis and Prognosis of Diabetic Complications</a></li>
      <li><a href="https://www.ncbi.nlm.nih.gov/books/NBK304271/" target="_blank">Glycated Haemoglobin (HbA1c) for the
          Diagnosis of Diabetes</a></li>
      <li><a href="https://academic.oup.com/pmj/article/97/1148/380/6969559" target="_blank">Is HbA1c an Ideal Biomarker
          of Well-Controlled Diabetes?</a></li>
      <li><a href="https://onlinelibrary.wiley.com/doi/10.1111/j.1753-0407.2009.00009.x" target="_blank">Review of
          Hemoglobin A1c in the Management of Diabetes</a></li>
      <li><a href="https://www.nature.com/articles/s41591-023-02610-2" target="_blank">Global Variation in Diabetes
          Diagnosis and Prevalence Based on Fasting Glucose and Hemoglobin A1c</a></li>
    </ol>
  </section>

  <!-- ==============================
       引入自定义脚本（必须放在 body 底部）
       ============================== -->
  <script src="main.js"></script>
</body>

</html>
